<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}" dir="{{ default `ltr` .Language.LanguageDirection }}">
    <head>
        {{- partial "head/head.html" . -}}
        {{- block "head" . -}}{{ end }}
        <link rel="manifest" href="/hugo-website-example-pwa-ios/webmanifest.json">
        <meta name="theme-color" media="(prefers-color-scheme: light)" content="white" />
        <meta name="theme-color" media="(prefers-color-scheme: dark)" content="black" />
        <div id="install-prompt" style="display: none;">
          <p>Installez cette application sur votre appareil : </p>
          <button>Installer</button>
        </div>
        <script>
          if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
              navigator.serviceWorker.register('/hugo-website-example-pwa-ios/service-worker.js')
            });
          }
        </script>

<script src="https://cdn.jsdelivr.net/npm/@pwabuilder/pwacompat@0.0.5/pwacompat.min.js"></script>
<script>
  if (window.matchMedia('(display-mode: standalone)').matches) {
    // L'application est déjà installée en mode autonome
    console.log('L\'application est déjà installée.');
  } else {
    // Afficher la bannière d'installation
    window.addEventListener('beforeinstallprompt', (event) => {
      event.preventDefault(); // Empêche l'affichage de la bannière par défaut
      const installPrompt = document.getElementById('install-prompt');
      installPrompt.style.display = 'block'; // Affiche la bannière d'installation
      installPrompt.addEventListener('click', () => {
        installPrompt.style.display = 'none'; // Masque la bannière d'installation
        event.prompt(); // Affiche la bannière d'installation native
      });
    });
  }
</script>
    </head>
    <body class="{{ block `body-class` . }}{{ end }}">
        {{- partial "head/colorScheme" . -}}

        {{/* The container is wider when there's any activated widget */}}
        {{- $hasWidget := false -}}
        {{- range .Site.Params.widgets -}}
            {{- if gt (len .) 0 -}}
                {{- $hasWidget = true -}}
            {{- end -}}
        {{- end -}}
        <div class="container main-container flex on-phone--column {{ if $hasWidget }}extended{{ else }}compact{{ end }}">
            {{- block "left-sidebar" . -}}
                {{ partial "sidebar/left.html" . }}
            {{- end -}}
            {{- block "right-sidebar" . -}}{{ end }}
            <main class="main full-width">
                {{- block "main" . }}{{- end }}
            </main>
        </div>
        {{ partial "footer/include.html" . }}
    </body>
</html>
